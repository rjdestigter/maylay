{
  "id": "room1",
  "name": "Crossroads",
  "width": 320,
  "height": 180,
  "backgroundColor": "#264653",
  "hotspots": [
    {
      "id": "ship_wheel",
      "name": "Ship wheel",
      "description": "A ship's wheel bolted to a tree. Subtle decoration was clearly not the goal.",
      "bounds": {
        "x": 242,
        "y": 24,
        "w": 34,
        "h": 29
      },
      "walkTarget": {
        "x": 259,
        "y": 121
      }
    },
    {
      "id": "door",
      "name": "door",
      "bounds": {
        "x": 232,
        "y": 50,
        "w": 55,
        "h": 62
      },
      "spriteBounds": {
        "x": 219,
        "y": 41,
        "w": 81,
        "h": 93
      },
      "sprite": {
        "defaultImageId": "doorClosed",
        "flagVariants": [
          {
            "flag": "doorOpen",
            "whenTrueImageId": "doorOpen",
            "whenFalseImageId": "doorClosed"
          }
        ]
      },
      "stateFlags": {
        "locked": "doorLocked",
        "open": "doorOpen",
        "broken": "doorBroken",
        "inspected": "doorInspected"
      },
      "states": {
        "locked": {
          "spriteImageId": "doorClosed",
          "dialogue": {
            "LOOK": "The lock is old, stubborn, and very proud of it.",
            "USE": "The lock politely declines all non-key proposals.",
            "OPEN": "Locked. Impressively, theatrically locked."
          }
        },
        "open": {
          "spriteImageId": "doorOpen",
          "dialogue": {
            "LOOK": "The door is open, as if inviting trouble.",
            "TALK": "You thank the open door. It remains humble.",
            "OPEN": "It is already open. No encore needed."
          }
        },
        "broken": {
          "spriteImageId": "doorOpen",
          "dialogue": {
            "LOOK": "The door hangs crooked on one hinge. Subtle it is not.",
            "USE": "You poke the wreckage. It looks offended.",
            "OPEN": "No need. Nature already opened it aggressively."
          }
        },
        "inspected": {
          "dialogue": {
            "LOOK": "You have already audited this door. The report is still 'locked'."
          }
        }
      },
      "walkTarget": {
        "x": 240,
        "y": 117
      }
    },
    {
      "id": "sign",
      "name": "sign",
      "bounds": {
        "x": 33,
        "y": 64,
        "w": 57,
        "h": 32
      },
      "walkTarget": {
        "x": 63,
        "y": 137
      }
    },
    {
      "id": "key",
      "name": "key",
      "bounds": {
        "x": 201,
        "y": 163,
        "w": 22,
        "h": 15
      },
      "spriteBounds": {
        "x": 200,
        "y": 158,
        "w": 24,
        "h": 30
      },
      "sprite": {
        "defaultImageId": "key"
      },
      "walkTarget": {
        "x": 198,
        "y": 172
      }
    },
    {
      "id": "rumbarrel",
      "name": "Rum barrel",
      "bounds": {
        "x": 2,
        "y": 95,
        "w": 32,
        "h": 34
      },
      "walkTarget": {
        "x": 22,
        "y": 137
      }
    }
  ],
  "scripts": [
    {
      "hotspotId": "key",
      "verb": "PICK_UP",
      "conditions": {
        "flagsNot": [
          "keyTaken"
        ]
      },
      "result": {
        "dialogueLines": [
          "You pick up the brass key."
        ],
        "addInventoryItem": {
          "id": "key",
          "name": "Key"
        },
        "setFlags": {
          "keyTaken": true,
          "keyInspected": true
        }
      }
    },
    {
      "hotspotId": "key",
      "verb": "PICK_UP",
      "conditions": {
        "flagsAll": [
          "keyTaken"
        ]
      },
      "result": {
        "dialogueLines": [
          "You already picked up the key."
        ]
      }
    },
    {
      "hotspotId": "door",
      "verb": "USE",
      "requireNoInventoryItem": true,
      "conditions": {
        "flagsAll": [
          "doorOpen"
        ]
      },
      "result": {
        "dialogueLines": [
          "You step through the open door."
        ],
        "roomChangeTo": "room2"
      }
    },
    {
      "hotspotId": "door",
      "verb": "USE",
      "requireNoInventoryItem": true,
      "conditions": {
        "flagsNot": [
          "doorOpen"
        ]
      },
      "result": {
        "dialogueLines": [
          "Use what on the door? Your optimism jiggles the handle, but not the lock."
        ]
      }
    },
    {
      "hotspotId": "door",
      "verb": "USE",
      "inventoryItemId": "key",
      "conditions": {
        "flagsNot": [
          "keyTaken"
        ]
      },
      "result": {
        "dialogueLines": [
          "You need to pick up the key first."
        ]
      }
    },
    {
      "hotspotId": "door",
      "verb": "USE",
      "inventoryItemId": "key",
      "conditions": {
        "flagsAll": [
          "doorOpen"
        ]
      },
      "result": {
        "dialogueLines": [
          "The door is already unlocked."
        ]
      }
    },
    {
      "hotspotId": "door",
      "verb": "USE",
      "inventoryItemId": "key",
      "conditions": {
        "flagsAll": [
          "keyTaken"
        ],
        "flagsNot": [
          "doorOpen"
        ]
      },
      "result": {
        "dialogueLines": [
          "The key turns with a click. The door swings open."
        ],
        "setFlags": {
          "doorOpen": true,
          "doorLocked": false,
          "doorInspected": true
        },
        "clearSelectedInventory": true
      }
    },
    {
      "hotspotId": "door",
      "verb": "OPEN",
      "conditions": {
        "flagsAll": [
          "doorOpen"
        ]
      },
      "result": {
        "dialogueLines": [
          "You step through the open door."
        ],
        "roomChangeTo": "room2"
      }
    },
    {
      "hotspotId": "door",
      "verb": "OPEN",
      "conditions": {
        "flagsNot": [
          "doorOpen"
        ]
      },
      "result": {
        "dialogueLines": [
          "Locked. Impressively, theatrically locked."
        ]
      }
    }
  ],
  "walkablePolygon": [
    {
      "x": 71,
      "y": 179
    },
    {
      "x": 57,
      "y": 159
    },
    {
      "x": 44,
      "y": 152
    },
    {
      "x": 24,
      "y": 150
    },
    {
      "x": 20,
      "y": 136
    },
    {
      "x": 32,
      "y": 135
    },
    {
      "x": 53,
      "y": 132
    },
    {
      "x": 72,
      "y": 137
    },
    {
      "x": 96,
      "y": 136
    },
    {
      "x": 106,
      "y": 133
    },
    {
      "x": 113,
      "y": 133
    },
    {
      "x": 119,
      "y": 128
    },
    {
      "x": 122,
      "y": 122
    },
    {
      "x": 107,
      "y": 113
    },
    {
      "x": 100,
      "y": 114
    },
    {
      "x": 83,
      "y": 102
    },
    {
      "x": 86,
      "y": 92
    },
    {
      "x": 101,
      "y": 90
    },
    {
      "x": 125,
      "y": 83
    },
    {
      "x": 132,
      "y": 79
    },
    {
      "x": 124,
      "y": 73
    },
    {
      "x": 130,
      "y": 71
    },
    {
      "x": 139,
      "y": 73
    },
    {
      "x": 146,
      "y": 77
    },
    {
      "x": 141,
      "y": 83
    },
    {
      "x": 131,
      "y": 91
    },
    {
      "x": 128,
      "y": 93
    },
    {
      "x": 140,
      "y": 102
    },
    {
      "x": 171,
      "y": 112
    },
    {
      "x": 195,
      "y": 118
    },
    {
      "x": 228,
      "y": 114
    },
    {
      "x": 262,
      "y": 113
    },
    {
      "x": 284,
      "y": 114
    },
    {
      "x": 302,
      "y": 119
    },
    {
      "x": 308,
      "y": 123
    },
    {
      "x": 283,
      "y": 124
    },
    {
      "x": 268,
      "y": 127
    },
    {
      "x": 263,
      "y": 145
    },
    {
      "x": 245,
      "y": 143
    },
    {
      "x": 230,
      "y": 147
    },
    {
      "x": 210,
      "y": 155
    },
    {
      "x": 195,
      "y": 170
    },
    {
      "x": 196,
      "y": 179
    }
  ],
  "perspective": {
    "farY": 70,
    "nearY": 179,
    "farScale": 0.32,
    "nearScale": 1
  }
}
